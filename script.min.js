"use strict";function enableEl(e){setTimeout(()=>{e.disabled=!1},100)}function checkError(){return!!error&&(alert(error),!0)}async function fetchCurrencyDetails(e){if(currencyType1&&currencyType2){currencyInput1.disabled=!0,currencyInput2.disabled=!0,loading.classList.remove("hide");const n=`https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies/${currencyType1}/${currencyType2}.json`;try{const r=await(await fetch(n)).json();if(void 0===r[currencyType2])return void(error="Currency Info Not Found in The JSON.");currencyInfo={from:{cur:currencyType1,amount:1},to:{cur:currencyType2,amount:parseFloat(r[currencyType2])}},dataFetched=!0,currencyInput1.value&&e?onAmountChange(parseFloat(currencyInput1.value)):currencyInput2.value?onAmountChange(parseFloat(currencyInput2.value),!1):currencyInput1.value&&onAmountChange(parseFloat(currencyInput1.value)),error=null}catch(e){dataFetched=!1,alert("Failed to fetch currencies information. Check Internet Connection."),e instanceof Error&&console.log(e.message)}finally{currencyInput1.disabled=!1,currencyInput2.disabled=!1,loading.classList.add("hide")}}}const currencyInput1=document.getElementById("cur1"),currencyInput2=document.getElementById("cur2"),currencySelect1=document.getElementById("curSel1"),currencySelect2=document.getElementById("curSel2"),loading=document.querySelector(".loading");let currencyInfo,amount1,currencyType1,amount2,currencyType2,dataFetched=!1,error=null;(async function(){try{const e="https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies.min.json",n=await(await fetch(e)).json();for(let e in n){const r=document.createElement("option");r.value=e,r.innerText=n[e]?`${n[e]}`:e.toUpperCase(),currencySelect1.append(r.cloneNode(!0)),currencySelect1.append(r.cloneNode(!0)),currencySelect2.append(r.cloneNode(!0))}}catch(e){alert("Unable to Fetch Currency List. Check internet connection and Refresh the page."),e instanceof Error&&console.log(e.message)}})();const onSelectChage=(e,n=!0)=>{const r=e.target,c=r.value;r.disabled=!0,enableEl(r),n?currencyType1=c:currencyType2=c,fetchCurrencyDetails(n)},onAmountChange=(e,n=!0)=>{if(dataFetched||fetchCurrencyDetails(n),isNaN(e))return n?void(currencyInput2.value=""):void(currencyInput1.value="");if(checkError())return;if(void 0===currencyInfo||isNaN(e))return;let r;if(n)return r=e*currencyInfo.to.amount,void(currencyInput2.value=`${r.toFixed(2)}`);r=e/currencyInfo.to.amount*currencyInfo.from.amount,currencyInput1.value=`${r.toFixed(2)}`};currencySelect1.addEventListener("change",e=>onSelectChage(e)),currencySelect2.addEventListener("change",e=>onSelectChage(e,!1)),currencyInput1.addEventListener("keyup",e=>{onAmountChange(parseFloat(e.target.value))}),currencyInput2.addEventListener("keyup",e=>{onAmountChange(parseFloat(e.target.value),!1)});